{"meta":{"title":"依禅 - 个人博客","subtitle":"","description":"依禅的个人博客系统，主要分享技术文章或者生活类的文章","author":"yichan","url":"https://fox-z.github.io","root":"/"},"pages":[{"title":"tags","date":"2020-03-22T13:49:20.000Z","updated":"2020-03-22T13:49:20.030Z","comments":true,"path":"tags/index.html","permalink":"https://fox-z.github.io/tags/index.html","excerpt":"","text":""},{"title":"","date":"2020-05-20T13:04:10.848Z","updated":"2020-05-20T13:04:10.848Z","comments":true,"path":"categories/life/index.html","permalink":"https://fox-z.github.io/categories/life/index.html","excerpt":"","text":"生活专栏"},{"title":"","date":"2020-05-20T13:04:17.467Z","updated":"2020-05-20T13:04:17.467Z","comments":true,"path":"categories/tools/index.html","permalink":"https://fox-z.github.io/categories/tools/index.html","excerpt":"","text":"工具专栏"},{"title":"","date":"2020-05-20T13:04:01.576Z","updated":"2020-05-20T13:04:01.576Z","comments":true,"path":"categories/FE/index.html","permalink":"https://fox-z.github.io/categories/FE/index.html","excerpt":"","text":"前端专栏"}],"posts":[{"title":"小程序输入框问题解决方案(Taro)","slug":"微信小程序输入框问题解决方案","date":"2020-05-20T06:16:54.000Z","updated":"2020-05-20T11:21:45.291Z","comments":true,"path":"2020/05/20/微信小程序输入框问题解决方案/","link":"","permalink":"https://fox-z.github.io/2020/05/20/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E7%A8%8B%E5%BA%8F%E8%BE%93%E5%85%A5%E6%A1%86%E9%97%AE%E9%A2%98%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88/","excerpt":"","text":"Taro小程序最近做的比较多的，业务涉及到都是表单相关组件，吃了不少苦头，于是就有了这篇文章，记录下经验，也希望能帮到你。 本文的所有场景都是基于页面中有大量input,textarea等文本输入组件 你不知道的input input在聚焦focus时表现为原生组件，层级最高，脱离page限制，设置z-index都无法改变 input默认有z-index: [1-2) 的层级，这个很多人都踩过坑 举个例子：某一个页面有大量输入框，底部有个悬浮的按钮btn, 固定定位的。当滑动页面 使btn覆盖在input上时，点击btn会发现注册在btn上的事件失效，点了没反应… ，如果这时脑子里想到的全是原生组件层级最高，那么你就进坑了，（没错，说的就是我）,然后就走向cover-view实现btn这条不归路，cover-view会定位错乱，滑动之后btn就飞了。 123456789101112131415161718192021222324252627&#x2F;&#x2F; 贴点代码 方便理解（错误示例）&lt;Input className&#x3D;&quot;ipt&quot; type&#x3D;&quot;number&quot; placeholderClass&#x3D;&quot;ipt-place&quot; value&#x3D;&#123;phone&#125; onInput&#x3D;&#123;this.phoneChange&#125; placeholder&#x3D;&quot;请输入手机号&quot;&gt;&lt;&#x2F;Input&gt;&#x2F;&#x2F; 按钮&lt;View className&#x3D;&quot;btn-wrap&quot;&gt; &lt;CoverView className&#x3D;&quot;btn&quot; onClick&#x3D;&#123;this.confirm&#125; &gt;保存&lt;&#x2F;CoverView&gt;&lt;&#x2F;View&gt;&#x2F;&#x2F; css.btn-wrap&#123; position: fixed; bottom: 0; left: 0; z-index: 1&#125; 显然解决思路错了，实际上结合上面第一条和第二条就知道错在哪里了，input没有聚焦的时候不是原生组件。我思路错的原因在于我开始的时候btn-wrap的z-index设置为1了，以为比页面元素高，于是当按钮覆盖input的时候，input的层级在btn之上, 这就是奇怪的地方，同样是1，后设置zIndex的元素应该在上面，但是这个例子中在开发工具和真机上都表现出input在上面的情况。当我把btn-wrap的zIndex设置为2的时候表现正常了，按钮在上，点击也正常了。所以我得出结论，input有1-2的层级。底部按钮不需要使用cover-view,用普通的view即可。 input类型为number在一些真机上会出现 聚焦时页面白屏，输入时闪烁的问题，替代方案是用digit,text, 之后结果自己处理下（正则限制） TextArea的一些骚操作 原生组件，没有同层渲染，层级最高，页面中如果有弹窗就要注意了，textarea会覆盖在弹窗之上，不管你的弹窗层级多高。鉴于这种情况，弹窗，自定义头部等一切高于页面本身元素的组件建议用cover-view和cover-img搭配实现。 TextArea当作按钮，没错，你没听错 说说为啥用TextArea做按钮，当一个全是Textarea输入框的时候，底部有悬浮按钮，按钮上绑定了事件handle，想象一下。这时候底部按钮就不能用普通的View了，层级原因，鉴于cover-view定位有问题的情况，我尝试了canvas，input，textarea，最后选择了textarea(disable)这种做按钮，并设置了zIndex，canvas 高版本sdk中为同层渲染，input也是。只能textarea了，以彼之道还施彼身。这样就覆盖在页面中的textarea之上了。 以为textarea(disable)加个样式就实现了？？？ 上真机上一看，ios上按钮正常显示，点击按钮handle事件也执行了，别激动 安卓上看看，按钮正常显示，点击，没反应。。。原因是disable导致的，于是乎我又开始拿出我的钻地弹了，各种尝试，终于发现textarea设置了padding有效，就是点击padding的区域，事件handle能执行，于是乎我设置padding充满了整个textarea，让按钮每一个角落都能点击。 现在才说实现了 ui + 点击。（测试了部分机型，可以的，如果有其他机型不行，告诉我。当然如果原生textarea实现有变动，可能就用不了） 12345678910&lt;Textarea disabled fixed disableDefaultPadding&gt;&lt;&#x2F;Textarea&gt;textarea&#123; height: 40px; padding: 20px;&#125; cover-view &amp;&amp; cover-img组件使用注意事项 以下统称cover组件 cover组件表现层级最高，cover-view 在小程序中是比较特殊的组件，与 view 的最大区别在于，它能覆盖在原生组件 map、video、canvas、camera 之上，且只能嵌套 cover-view， button 和 cover-image。如果说textarea是顶楼，那么cover就是天台，没有比cover组件层级更高的组件了。 cover-view 单边border设置无效真机上表现为全border，所以需要处理，思路有两种 再写一个cover-view高度为1，背景色设置为边框色 让ui切个边框图，写一个cover-img实现 cover-view在fixed的盒子中，无法正常定位，会随页面的滚动而滚动 同样是底部按钮悬浮的场景 这种情况是基础库低于1.9.90版本出现的，由于最外层 cover-view 不支持 position: fixed; 所以最外层盒子采用 view 定位 position: fixed;基础库 1.9.90 起最外层 cover-view 支持 position: fixed, 但是在部分机型上仍然会出现 键盘弹起，滑动页面 场景下 定位错乱的问题，目前还未解决，但是有替代方案textarea。","categories":[],"tags":[{"name":"miniprogram","slug":"miniprogram","permalink":"https://fox-z.github.io/tags/miniprogram/"}]},{"title":"Hello World","slug":"hello-world","date":"2020-03-22T12:46:32.229Z","updated":"2020-03-22T13:24:38.830Z","comments":true,"path":"2020/03/22/hello-world/","link":"","permalink":"https://fox-z.github.io/2020/03/22/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}